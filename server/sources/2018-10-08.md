# Vue组件间通信方式
2018-10-08  
Vue组件之间有以下八种通信方式  
### Props & $emit
这是最常见的父子组件通信方式, 父组件通过props向子组件传递参数, 子组件通过$emit向父组件触发事件.  
```
<!-- 父组件 -->
<template id="parent">
  <child :valueA="xxx" @fun="func"></child>
</template>

<!-- 子组件 -->
<template id="child">
</template>

export default {
  props: {
    valueA: String
  },
  methods: {
    func(value) {
      this.$emit('fun', value);
    }
  }
};
```
### $attrs 与 $listeners
props与$emit只可以在直接的父子组件中通信, 而如果想在父子组件中跨层通信则可以考虑$attrs与$listeners.  
```
<!-- 子组件C -->
<template id="componentC">
  <input v-model="$attrs.messageC" @input="emitCData($attrs.messageC)">
</template>
export default {
  methods: {
    emitCData(val) {
      this.$emit('getCData', val);
    }
  }
};
```
```
<!-- 子组件B -->
<template id="componentB">
  <input v-model="messageB" @input="emitBData(messageB)">
  <!-- v-bind="$attrs"可以让C直接获取到A中传递下来的props(除了B中声明的props), v-on="$listeners"可以让C直接在A中触发getCData -->
  <c v-bind="$attrs" v-on="$listeners">
</template>
export default {
  props: ['messageB'],
  data() {
    return {
      messageB: this.messageB;
    };
  },
  methods: {
    emitBData(val) {
      this.$emit('getBData', val);
    }
  }
};
```
```
<!-- 父组件A -->
<template>
  <B :messageB="messageB" :messageC="messageC" @getBData="getBData" @getCData="getCData">
</template>
```

### 中央事件总线EventBus
### provide & inject
### v-model
### $parent & $children
### broadcast & dispatch
### vuex